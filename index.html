<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Workout & Food Tracker</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-dark: #1a1a2e;
            --primary-dark: #1f1f38;
            --text-light: #e0e0e0;
            --text-muted: #8c8c9a;
            --accent-primary: #00a8ff;
            --accent-secondary: #2ecc71;
            --accent-tertiary: #9b59b6;
            --accent-danger: #e74c3c;
            --border-color: #313154;
        }

        /* --- ADD THIS: Helper class to hide elements --- */
        .hidden { display: none !important; }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: 'Poppins', sans-serif; background-color: var(--bg-dark); color: var(--text-light); line-height: 1.6; }
        .container { max-width: 900px; margin: 20px auto; padding: 20px; }

        /* --- ADD THIS: Styles for the new Login Form --- */
        #auth-container {
            max-width: 400px;
            margin: 50px auto;
            padding: 30px;
            background-color: var(--primary-dark);
            border-radius: 12px;
            border: 1px solid var(--border-color);
        }
        #auth-container h2 { text-align: center; margin-bottom: 25px; color: #fff; }
        .auth-form input {
            width: 100%;
            padding: 12px 15px;
            margin-bottom: 15px;
            background-color: var(--bg-dark);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            color: var(--text-light);
            font-family: 'Poppins', sans-serif;
        }
        .auth-form button {
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 8px;
            background-color: var(--accent-primary);
            color: #fff;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .auth-form button:hover { background-color: #007bb5; }
        #auth-toggle { text-align: center; margin-top: 20px; cursor: pointer; color: var(--text-muted); }
        #auth-toggle:hover { color: var(--accent-primary); }
        #auth-error { color: var(--accent-danger); text-align: center; margin-bottom: 15px; font-size: 0.9rem; }

        /* --- Your existing styles from here down are perfect, no changes needed --- */
        .welcome-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: var(--bg-dark); display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 1000; transition: opacity 1s ease-out 2.5s, visibility 1s ease-out 2.5s; opacity: 1; visibility: visible; }
        .welcome-screen.hidden { opacity: 0; visibility: hidden; }
        .logo-container { opacity: 0; transform: scale(0.5); animation: logo-fade-in 1.5s forwards; }
        .welcome-logo { width: 120px; height: 120px; margin-bottom: 20px; }
        .welcome-title { font-size: 3rem; color: #fff; text-shadow: 0 0 15px var(--accent-primary); opacity: 0; transform: translateY(20px); animation: title-fade-in 1.5s forwards 0.5s; }
        @keyframes logo-fade-in { to { opacity: 1; transform: scale(1); } }
        @keyframes title-fade-in { to { opacity: 1; transform: translateY(0); } }
        .profile-section { background-color: var(--primary-dark); padding: 20px; border-radius: 12px; margin-bottom: 40px; border: 1px solid var(--border-color); }
        .profile-header { display: flex; justify-content: space-between; align-items: center; }
        .profile-section h2 { margin-top: 0; margin-bottom: 20px; text-align: center; }
        .profile-inputs { display: flex; justify-content: center; gap: 20px; flex-wrap: wrap; align-items: center; }
        .profile-inputs input { background-color: var(--bg-dark); color: var(--text-light); border: 1px solid var(--border-color); border-radius: 8px; padding: 10px 15px; font-family: 'Poppins', sans-serif; font-size: 1rem; width: 200px; text-align: center; transition: border-color 0.3s; }
        .profile-inputs input:focus { outline: none; border-color: var(--accent-primary); }
        .grocery-link-btn { background-color: var(--accent-secondary); color: #fff; text-decoration: none; padding: 10px 20px; border-radius: 8px; font-weight: 600; transition: background-color 0.3s; }
        .grocery-link-btn:hover { background-color: #27ae60; }
        #logout-btn { background-color: var(--accent-danger); color: #fff; text-decoration: none; padding: 10px 20px; border-radius: 8px; font-weight: 600; transition: background-color 0.3s; cursor: pointer; border: none; font-family: 'Poppins', sans-serif; }
        #logout-btn:hover { background-color: #c0392b; }
        h1 { text-align: center; font-size: 2.5rem; color: #fff; margin-bottom: 30px; text-shadow: 0 0 10px var(--accent-primary); }
        h2 { font-size: 2rem; color: var(--accent-primary); border-bottom: 2px solid var(--border-color); padding-bottom: 10px; margin: 50px 0 30px; }
        .day-card { background-color: var(--primary-dark); border: 1px solid var(--border-color); border-radius: 12px; padding: 25px; margin-bottom: 25px; box-shadow: 0 8px 20px rgba(0,0,0,0.2); transition: transform 0.3s ease, box-shadow 0.3s ease; position: relative; border-left: 5px solid transparent; }
        .day-card.completed-day { border-left-color: var(--accent-secondary); opacity: 0.8; }
        .day-card.missed-day { border-left-color: var(--accent-danger); opacity: 0.7; }
        .day-card[data-type="recovery"] { border-left-color: var(--accent-tertiary); }
        .day-card:hover { transform: translateY(-5px); box-shadow: 0 12px 25px rgba(0,0,0,0.3); }
        .card-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .card-header h3 { font-size: 1.5rem; color: #fff; }
        .quote-of-the-day { font-style: italic; color: var(--text-muted); border-left: 3px solid var(--accent-primary); padding-left: 15px; margin: 20px 5px 25px 5px; font-size: 1rem; }
        .food-toggle { background-color: var(--bg-dark); border: 1px solid var(--border-color); color: var(--accent-secondary); padding: 10px 15px; border-radius: 8px; cursor: pointer; display: block; width: 100%; text-align: left; font-family: 'Poppins', sans-serif; font-size: 1.1rem; font-weight: 600; margin-bottom: 15px; transition: background-color 0.3s; }
        .food-toggle:hover { background-color: #2a2a4e; }
        .food-plan { display: none; padding: 15px; background-color: rgba(0,0,0,0.2); border-radius: 8px; }
        .meal-list { list-style: none; padding: 0; }
        .meal-item { display: flex; align-items: center; justify-content: space-between; margin-bottom: 15px; flex-wrap: wrap; }
        .meal-item .meal-desc { flex-grow: 1; color: var(--text-light); }
        .meal-item strong { color: var(--accent-secondary); }
        .meal-item .meal-controls { display: flex; align-items: center; margin-left: 15px; }
        .meal-item input[type="time"] { background-color: var(--bg-dark); color: var(--text-light); border: 1px solid var(--border-color); border-radius: 5px; padding: 5px; }
        .exercise-list { list-style-type: none; margin-top: 20px; }
        .exercise-item { margin-bottom: 20px; padding: 15px; border-left: 4px solid var(--accent-primary); transition: all 0.3s ease; background-color: rgba(0,0,0,0.1); border-radius: 0 8px 8px 0; }
        .exercise-item.completed { border-left-color: var(--accent-secondary); opacity: 0.6; }
        .exercise-item.completed .exercise-name { text-decoration: line-through; }
        .exercise-name { font-weight: 600; font-size: 1.1rem; margin-bottom: 10px; display: block; }
        .custom-checkbox { display: inline-flex; align-items: center; cursor: pointer; margin: 0 10px; font-size: 0.95rem; }
        .custom-checkbox input { display: none; }
        .checkmark { width: 22px; height: 22px; background-color: rgba(0,0,0,0.2); border: 2px solid var(--border-color); border-radius: 5px; margin-right: 8px; position: relative; transition: all 0.2s ease; }
        .custom-checkbox:hover .checkmark { border-color: var(--accent-primary); }
        .custom-checkbox input:checked + .checkmark { background-color: var(--accent-primary); border-color: var(--accent-primary); }
        .day-card[data-type="recovery"] .custom-checkbox input:checked + .checkmark, .meal-item .custom-checkbox input:checked + .checkmark { background-color: var(--accent-secondary); border-color: var(--accent-secondary); }
        .checkmark::after { content: ''; position: absolute; display: none; left: 7px; top: 2px; width: 5px; height: 12px; border: solid white; border-width: 0 3px 3px 0; transform: rotate(45deg); }
        .custom-checkbox input:checked + .checkmark::after { display: block; }
        .progress-bar-container { width: 100%; background-color: var(--bg-dark); border-radius: 5px; margin-top: 20px; overflow: hidden; border: 1px solid var(--border-color); }
        .progress-bar { width: 0%; height: 12px; background: linear-gradient(90deg, var(--accent-primary), var(--accent-secondary)); border-radius: 5px; transition: width 0.5s ease-in-out; }
        p.card-text { font-size: 1.1rem; color: var(--text-muted); margin-bottom: 15px; }
        .timer { margin-top: 20px; padding-top: 20px; border-top: 1px solid var(--border-color); text-align: center; }
        .timer-display { font-size: 2.5rem; font-weight: 600; color: var(--text-light); margin-bottom: 15px; }
        .timer-controls button { background-color: var(--bg-dark); color: var(--accent-primary); border: 1px solid var(--accent-primary); padding: 8px 16px; border-radius: 5px; cursor: pointer; font-family: 'Poppins', sans-serif; margin: 0 5px; transition: background-color 0.3s, color 0.3s; }
        .timer-controls button:hover { background-color: var(--accent-primary); color: var(--bg-dark); }
        .day-card[data-type="recovery"] .timer-controls button { color: var(--accent-tertiary); border-color: var(--accent-tertiary); }
        .day-card[data-type="recovery"] .timer-controls button:hover { background-color: var(--accent-tertiary); color: var(--bg-dark); }
        .timer-controls button.pause-btn.running { background-color: var(--accent-danger); border-color: var(--accent-danger); color: var(--text-light); }
        .missed-workouts-section { background-color: var(--primary-dark); padding: 20px; border-radius: 12px; margin-top: 40px; border: 1px solid var(--accent-danger); }
        #missed-workouts-list { list-style-type: none; color: var(--text-muted); }
        #missed-workouts-list li { padding: 5px 0; border-bottom: 1px solid var(--border-color); }
        #missed-workouts-list li:last-child { border-bottom: none; }
    </style>
</head>
<body>

    <div class="welcome-screen">
        <div class="logo-container">
            </div>
        <h1 class="welcome-title">Workout Tracker</h1>
    </div>

    <div id="auth-container">
        <h2 id="auth-title">Login</h2>
        <div id="auth-error"></div>
        <form class="auth-form" id="login-form">
            <input type="email" id="login-email" placeholder="Email" required>
            <input type="password" id="login-password" placeholder="Password" required>
            <button type="submit">Login</button>
        </form>
        <form class="auth-form hidden" id="signup-form">
            <input type="email" id="signup-email" placeholder="Email" required>
            <input type="password" id="signup-password" placeholder="Password (min. 6 characters)" required>
            <button type="submit">Sign Up</button>
        </form>
        <p id="auth-toggle">Need an account? Sign Up</p>
    </div>

    <div class="container hidden" id="app-container">
        <div class="profile-section">
            <div class="profile-header">
                <h2>My Profile</h2>
                <button id="logout-btn">Logout</button> </div>
            <div class="profile-inputs">
                <input type="text" id="userName" placeholder="Enter Your Name">
                <input type="text" id="userWeight" placeholder="Enter Current Weight">
                <a href="./grocery_list.html" class="grocery-link-btn">Go to Grocery List</a>
            </div>
        </div>

        <h1>My June Health Plan</h1>
        <section id="week1"></section>
        <section id="week2"></section>
        <section id="week3"></section>
        
        <div class="missed-workouts-section">
            <h2>Missed Entries</h2>
            <ul id="missed-workouts-list"></ul>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.6.7/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.7/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.7/firebase-firestore-compat.js"></script>

    <script src="firebase-init.js"></script>
    <script src="main.js"></script>
</body>
</html>